<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>New Year Countdown</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Pretendard', Arial, sans-serif;
    }

    body {
        background: #000;
        color: #fff;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        transition: background 2s ease;
    }

    body.bright {
        background: radial-gradient(circle at center, #222 0%, #000 60%);
    }

    .container {
        text-align: center;
        z-index: 2;
    }

    .title {
        font-size: 1.5rem;
        opacity: 0.7;
        margin-bottom: 20px;
    }

    .countdown {
        font-size: 4rem;
        font-weight: 700;
        letter-spacing: 4px;
    }

    .message {
        margin-top: 20px;
        font-size: 1.4rem;
        opacity: 0.9;
    }

    .credit {
        position: absolute;
        bottom: 20px;
        font-size: 0.9rem;
        opacity: 0.4;
        letter-spacing: 1px;
        z-index: 2;
    }

    canvas {
        position: absolute;
        inset: 0;
        z-index: 1;
        pointer-events: none;
    }
</style>
</head>
<body>
<canvas id="fireworks"></canvas>

<div class="container">
    <div class="title">ìƒˆí•´ê¹Œì§€ ë‚¨ì€ ì‹œê°„</div>
    <div class="countdown" id="countdown">00:00:00</div>
    <div class="message" id="message"></div>
</div>

<div class="credit">Made by ku</div>

<script>
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let fireworks = [];
let exploded = false;

window.onresize = () => {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
};

function random(min, max) {
    return Math.random() * (max - min) + min;
}

function createFirework() {
    const x = random(100, canvas.width - 100);
    const y = random(100, canvas.height / 2);
    const particles = [];

    for (let i = 0; i < 80; i++) {
        particles.push({
            x, y,
            vx: random(-4, 4),
            vy: random(-4, 4),
            alpha: 1,
            size: random(1, 3)
        });
    }
    fireworks.push(particles);
}

function drawFireworks() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    fireworks.forEach((particles, i) => {
        particles.forEach(p => {
            p.x += p.vx;
            p.y += p.vy;
            p.alpha -= 0.015;

            ctx.fillStyle = `rgba(255, 215, 0, ${p.alpha})`;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fill();
        });

        fireworks[i] = particles.filter(p => p.alpha > 0);
    });

    fireworks = fireworks.filter(p => p.length > 0);

    if (fireworks.length > 0) {
        requestAnimationFrame(drawFireworks);
    }
}

function startFireworks() {
    if (exploded) return;
    exploded = true;

    document.body.classList.add("bright");
    document.getElementById("message").textContent = "ğŸ‰ ìƒˆí•´ ë³µ ë§ì´ ë°›ìœ¼ì„¸ìš”!";

    for (let i = 0; i < 6; i++) {
        setTimeout(() => {
            createFirework();
            drawFireworks();
        }, i * 400);
    }
}

function updateCountdown() {
    const now = new Date();
    const nextYear = new Date(now.getFullYear() + 1, 0, 1, 0, 0, 0);
    const diff = nextYear - now;

    if (diff <= 0) {
        document.getElementById("countdown").textContent = "00:00:00";
        startFireworks();
        return;
    }

    const hours = String(Math.floor(diff / (1000 * 60 * 60))).padStart(2, "0");
    const minutes = String(Math.floor((diff / (1000 * 60)) % 60)).padStart(2, "0");
    const seconds = String(Math.floor((diff / 1000) % 60)).padStart(2, "0");

    document.getElementById("countdown").textContent =
        `${hours}:${minutes}:${seconds}`;
}

updateCountdown();
setInterval(updateCountdown, 1000);
</script>
</body>
</html>
